# ADR 001: クライアントサイドでのクイズ結果処理とQRコードによるステートレスなデータ共有

## ステータス
承認済み

## コンテキスト
クイズアプリケーションにおいて、ユーザーのプライバシー保護とサーバーリソースの最小化のために、ユーザー情報（ユーザー名、得点、実施日など）をサーバー側に保存しない仕組みが求められている。
一方で、ユーザーは自身の結果（得点、偏差値など）を記録したり、持ち運んだり（QRコード化）したいという要望がある。

## 決定事項
1. **サーバーレス（ステートレス）アーキテクチャの採用**
   - サーバー（PHP）はクイズデータの提供のみを行い、ユーザーの回答履歴や結果データは保存しない。
   - 全ての結果処理はクライアントサイド（ブラウザ上のJavaScript）で完結させる。

2. **データフォーマット**
   - 結果データは以下のJSONフォーマットで扱う。
     ```json
     {
       "date": "YYYY-MM-DD HH:mm:ss",
       "score": 80,
       "deviation": 55,
       "username": "UserInputName"
     }
     ```

3. **データ共有・保存手段**
   - **QRコード**: 結果JSONデータをQRコード化し、画面に表示する。ユーザーはこれをスマホで読み取るか、画像として保存する。
   - **JSONファイル**: `kekka.json` としてダウンロード機能を提供する。

4. **技術スタック**
   - **QRコード生成**: JavaScriptライブラリ（`qrcode.js` 等）を使用し、Canvas上に描画する。
   - **偏差値計算**: サーバーに全ユーザーの統計データを持たないため、固定の平均点・標準偏差を用いた簡易計算ロジックをクライアントサイドに実装する。

## メリット
- **プライバシー保護**: サーバーに個人情報が一切残らないため、情報漏洩のリスクがない。
- **運用コスト削減**: データベースが不要であり、ストレージ容量やバックアップの手間が削減できる。
- **ポータビリティ**: QRコードやJSONファイルにより、ユーザーは自身のデータをオフラインで管理・利用できる。

## デメリット
- **統計分析の欠如**: サーバーにデータを集めないため、全体的な正答率や難易度の分析ができない。
- **偏差値の正確性**: 実際の母集団に基づかないため、あくまで目安（エンターテインメント要素）としての偏差値となる。
